<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Nginx on Alex&#39;s site</title>
    <link>https://github.alexsun.one/tags/nginx/</link>
    <description>Recent content in Nginx on Alex&#39;s site</description>
    <generator>Hugo -- 0.154.3</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 05 Feb 2026 10:47:08 +0800</lastBuildDate>
    <atom:link href="https://github.alexsun.one/tags/nginx/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>关于本站</title>
      <link>https://github.alexsun.one/posts/aboutthissite/</link>
      <pubDate>Mon, 02 Feb 2026 16:36:28 +0800</pubDate>
      <guid>https://github.alexsun.one/posts/aboutthissite/</guid>
      <description>&lt;h3 id=&#34;网站概况&#34;&gt;网站概况：&lt;/h3&gt;
&lt;p&gt;(通过JS请求[/api/neofetch]得到，每2秒更新)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;&#34;&gt;&lt;code id=&#39;stat&#39; class=&#34;language&#34;&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;script&gt;
    let api_xhr = new XMLHttpRequest();
    neofetch = function(){
        if (api_xhr.readyState === XMLHttpRequest.DONE) {
            if (api_xhr.status === 0) {
                console.log(&#39;请求被取消&#39;)
            } else if (api_xhr.status === 200) {
                var stat = document.getElementById(&#39;stat&#39;);
                stat.innerText = api_xhr.response;
            } else {
                console.error(&#39;请求失败:&#39;, api_xhr.status);
            }
        }
    }
    send_xhr = function(){
        api_xhr.open(&#39;GET&#39;,&#39;/api/neofetch&#39;);
        api_xhr.send();
    }
    api_xhr.onreadystatechange = neofetch;
    send_xhr();
    setInterval(send_xhr,2000);
&lt;/script&gt;
&lt;h1 id=&#34;规划准备&#34;&gt;规划准备&lt;/h1&gt;
&lt;p&gt;此站于&lt;a href=&#34;https://qhfz.edu.cn/&#34;&gt;清华附中&lt;/a&gt;“极智”挑战期间(2026-01-31~2026-02-06)搭建&lt;/p&gt;
&lt;p&gt;笔者打算使用&lt;a href=&#34;https://www.alexsun.one/posts/hugo/&#34;&gt;&lt;em&gt;hugo&lt;/em&gt;&lt;/a&gt;搭建静态博客网站，然后由nginx处理流量。&lt;/p&gt;
&lt;h1 id=&#34;具体操作&#34;&gt;具体操作&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;配置云服务器&lt;/p&gt;
&lt;p&gt;清华附中为学员提供了&lt;a href=&#34;https://www.aliyun.com/benefit/select/ecs&#34;&gt;阿里云ECS&lt;/a&gt;的服务器，这与笔者在初中时搭建的服务器类型相同。&lt;/p&gt;
&lt;p&gt;在Datacon注册及登录后，可以打开虚拟环境，查看ECS SSH的ip及密码，然后便可以通过SSH远程登录root账号（笔者使用了VSCode的OpenSSH插件）&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ssh -p &lt;span class=&#34;m&#34;&gt;22&lt;/span&gt; root@&amp;lt;your_ip&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;随后输入密码即可登录&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置域名解析&lt;/p&gt;
&lt;p&gt;注册&lt;a href=&#34;https://www.namesilo.com/&#34;&gt;Namesilo&lt;/a&gt;的账号，并在Namesilo中购买一个域名（笔者购买了alexsun.one，花费24CNY），配置DNS记录，等待10分钟（TTL=3600）后即可全球生效&lt;/p&gt;</description>
    </item>
    <item>
      <title>Nginx安全配置</title>
      <link>https://github.alexsun.one/posts/nginx_conf/</link>
      <pubDate>Thu, 05 Feb 2026 10:47:08 +0800</pubDate>
      <guid>https://github.alexsun.one/posts/nginx_conf/</guid>
      <description>&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root@datacon-winterc:~/quickstart# cat /etc/nginx/nginx.conf &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep access_log
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;access_log /var/log/nginx/access.log&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;#nginx访问日志文件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;grep wp-admin /var/log/nginx/access.log &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; cat -n
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#查看日志中含wp-admin(wordpress后台)的内容&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;1  162.158.182.84 - - [05/Feb/2026:00:05:25 +0800] &amp;#34;GET /wordpress/wp-admin/setup-config.php HTTP/1.1&amp;#34; 404 134 &amp;#34;-&amp;#34; &amp;#34;https://alexsun.one/wordpress/wp-admin/setup-config.php&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;......
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;73  172.71.184.188 - - [05/Feb/2026:10:49:11 +0800] &amp;#34;GET /wp-admin/setup-config.php HTTP/1.1&amp;#34; 444 0 &amp;#34;-&amp;#34; &amp;#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;我的站点上并没有安装WordPress，以上73条访问日志来自于&lt;em&gt;&lt;strong&gt;恶意扫描&lt;/strong&gt;&lt;/em&gt;&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;
&lt;img alt=&#34;IP信息&#34; loading=&#34;lazy&#34; src=&#34;https://free.picui.cn/free/2026/02/05/69840e9e9cc7c.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;用nginx的location可以配置路由，实现对恶意扫描的处理：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;location [modifier] [URI] {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;下面下面是 Nginx 中 &lt;strong&gt;location&lt;/strong&gt; 指令最常用的几种匹配方式（modifier）的语法总结，以表格形式呈现，便于对照和记忆。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
